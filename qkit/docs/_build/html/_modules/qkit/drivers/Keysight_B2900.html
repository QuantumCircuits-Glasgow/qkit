

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>qkit.drivers.Keysight_B2900 &mdash; Qkit 0.1.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=a58bc63e"></script>
      <script src="../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Qkit
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Package Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../qkit.html">qkit package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Qkit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">qkit.drivers.Keysight_B2900</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for qkit.drivers.Keysight_B2900</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># Keysight_B2900.py driver for Keysight B2900 series source measure unit</span>
<span class="c1"># Micha Wildermuth, micha.wildermuth@kit.edu 2019</span>
<span class="c1">#</span>
<span class="c1"># This program is free software; you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU General Public License as published by</span>
<span class="c1"># the Free Software Foundation; either version 2 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program; if not, write to the Free Software</span>
<span class="c1"># Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">qkit.core.instrument_base</span><span class="w"> </span><span class="kn">import</span> <span class="n">Instrument</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qkit</span><span class="w"> </span><span class="kn">import</span> <span class="n">visa</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>


<div class="viewcode-block" id="Keysight_B2900">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Keysight_B2900</span><span class="p">(</span><span class="n">Instrument</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is the driver for the Keysight B2900 series source measure unit.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">reset</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes VISA communication with the instrument Keysight B2900.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name: string</span>
<span class="sd">            Name of the instrument (driver).</span>
<span class="sd">        address: string</span>
<span class="sd">            GPIB address for the communication with the instrument.</span>
<span class="sd">        reset: bool, optional</span>
<span class="sd">            Resets the instrument to default conditions. Default is False.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; import qkit</span>
<span class="sd">        QKIT configuration initialized -&gt; available as qkit.cfg[...]</span>

<span class="sd">        &gt;&gt;&gt; qkit.start()</span>
<span class="sd">        Starting QKIT framework ... -&gt; qkit.core.startup</span>
<span class="sd">        Loading module ... S10_logging.py</span>
<span class="sd">        Loading module ... S12_lockfile.py</span>
<span class="sd">        Loading module ... S14_setup_directories.py</span>
<span class="sd">        Loading module ... S20_check_for_updates.py</span>
<span class="sd">        Loading module ... S25_info_service.py</span>
<span class="sd">        Loading module ... S30_qkit_start.py</span>
<span class="sd">        Loading module ... S65_load_RI_service.py</span>
<span class="sd">        Loading module ... S70_load_visa.py</span>
<span class="sd">        Loading module ... S80_load_file_service.py</span>
<span class="sd">        Loading module ... S85_init_measurement.py</span>
<span class="sd">        Loading module ... S98_started.py</span>
<span class="sd">        Loading module ... S99_init_user.py</span>

<span class="sd">        &gt;&gt;&gt; IVD = qkit.instruments.create(&#39;IVD&#39;, &#39;Keysight_B2900&#39;, address=&#39;TCPIP0::00.00.000.00::INSTR&#39;, reset=True)</span>
<span class="sd">        Initialized the file info database (qkit.fid) in 0.000 seconds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SYSTem:BEEPer:STATe mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="vm">__name__</span>
        <span class="c1"># Start VISA communication</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;: Initializing instrument Keysight B29000&#39;</span><span class="p">)</span>
        <span class="n">Instrument</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;physical&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_address</span> <span class="o">=</span> <span class="n">address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span> <span class="o">=</span> <span class="n">visa</span><span class="o">.</span><span class="n">instrument</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_address</span><span class="p">)</span>
        <span class="c1"># different versions for 1 or 2 channels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_IDN</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;*IDN?&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_IDN</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">},</span> <span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span><span class="p">}}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">},</span> <span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39; of channel 1&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39; of channel 2&#39;</span><span class="p">}}</span>
        <span class="c1"># initial variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_mode</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span>  <span class="c1"># 1 (IV-mode) for single channel SMU and 0 (VV-mode) for two channel SMU</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_modes</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;2-wire&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;4-wire&#39;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;curr&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;volt&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;res&#39;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_IV_units</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;V&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Ohm&#39;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sense_mode</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">)}</span>
        <span class="c1"># dict of defaults values: defaults[&lt;sweep_mode&gt;][&lt;channel&gt;][&lt;parameter&gt;][&lt;value&gt;]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="p">[{</span><span class="bp">self</span><span class="o">.</span><span class="n">set_measurement_mode</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_mode</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_mode</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_range</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_range</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_delay</span><span class="p">:</span> <span class="mf">15e-6</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_delay</span><span class="p">:</span> <span class="mf">15e-6</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_nplc</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
                              <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">set_measurement_mode</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_mode</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_mode</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_range</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_range</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_delay</span><span class="p">:</span> <span class="mf">15e-6</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_delay</span><span class="p">:</span> <span class="mf">15e-6</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_nplc</span><span class="p">:</span> <span class="mi">1</span><span class="p">}],</span>
                          <span class="mi">1</span><span class="p">:</span> <span class="p">[{</span><span class="bp">self</span><span class="o">.</span><span class="n">set_measurement_mode</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_mode</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_mode</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_range</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_range</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_delay</span><span class="p">:</span> <span class="mf">15e-6</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_delay</span><span class="p">:</span> <span class="mf">15e-6</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_nplc</span><span class="p">:</span> <span class="mi">1</span><span class="p">}],</span>
                          <span class="mi">2</span><span class="p">:</span> <span class="p">[{</span><span class="bp">self</span><span class="o">.</span><span class="n">set_measurement_mode</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_mode</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_mode</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_range</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_range</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_delay</span><span class="p">:</span> <span class="mf">15e-6</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_delay</span><span class="p">:</span> <span class="mf">15e-6</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_nplc</span><span class="p">:</span> <span class="mi">1</span><span class="p">}]}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_str</span> <span class="o">=</span> <span class="s1">&#39;default parameters&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_defaults_docstring</span><span class="p">()</span>
        <span class="c1"># condition code registers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">measurement_ccr</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Ch1 Limit Test Summary&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 1 failed one or more limit tests.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Ch1 Reading Available&#39;</span><span class="p">,</span> <span class="s1">&#39;Reading of channel 1 was taken normally.&#39;</span><span class="p">),</span>
                                <span class="p">(</span>
                                <span class="s1">&#39;Ch1 Reading Overflow&#39;</span><span class="p">,</span> <span class="s1">&#39;Reading of channel 1 exceeds the selected measurement range.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Ch1 Buffer Available&#39;</span><span class="p">,</span> <span class="s1">&#39;Trace buffer for channel 1 has data.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Ch1 Buffer Full&#39;</span><span class="p">,</span> <span class="s1">&#39;Trace buffer for channel 1 is full.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Not used&#39;</span><span class="p">,</span> <span class="s1">&#39;0 is returned.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Ch2 Limit Test Summary&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 2 failed one or more limit tests.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Ch2 Reading Available&#39;</span><span class="p">,</span> <span class="s1">&#39;Reading of channel 2 was taken normally.&#39;</span><span class="p">),</span>
                                <span class="p">(</span>
                                <span class="s1">&#39;Ch2 Reading Overflow&#39;</span><span class="p">,</span> <span class="s1">&#39;Reading of channel 2 exceeds the selected measurement range.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Ch2 Buffer Available&#39;</span><span class="p">,</span> <span class="s1">&#39;Trace buffer for channel 2 has data.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Ch2 Buffer Full&#39;</span><span class="p">,</span> <span class="s1">&#39;Trace buffer for channel 2 is full.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Not used&#39;</span><span class="p">,</span> <span class="s1">&#39;0 is returned.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Not used&#39;</span><span class="p">,</span> <span class="s1">&#39;0 is returned.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Not used&#39;</span><span class="p">,</span> <span class="s1">&#39;0 is returned.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Not used&#39;</span><span class="p">,</span> <span class="s1">&#39;0 is returned.&#39;</span><span class="p">),</span>
                                <span class="p">(</span><span class="s1">&#39;Not used&#39;</span><span class="p">,</span> <span class="s1">&#39;0 is returned.&#39;</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operation_ccr</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Calibration/Self-test Running&#39;</span><span class="p">,</span> <span class="s1">&#39;Self-calibration or Self-test is in progress.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Ch1 Transition Idle&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 1 is in the transition idle state.&#39;</span><span class="p">),</span>
                              <span class="p">(</span>
                              <span class="s1">&#39;Ch1 Waiting for Transition Trigger&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 1 is waiting for the transition trigger.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Ch1 Waiting for Transition Arm&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 1 is waiting for the transition arm.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Ch1 Acquire Idle&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 1 is in the acquire idle state.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Ch1 Waiting for Acquire Trigger&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 1 is waiting for the acquire trigger.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Ch1 Waiting for Acquire Arm&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 1 is waiting for the acquire arm.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Ch2 Transition Idle&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 2 is in the transition idle state.&#39;</span><span class="p">),</span>
                              <span class="p">(</span>
                              <span class="s1">&#39;Ch2 Waiting for Transition Trigger&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 2 is waiting for the transition trigger.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Ch2 Waiting for Transition Arm&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 2 is waiting for the transition arm.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Ch2 Acquire Idle&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 2 is in the acquire idle state.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Ch2 Waiting for Acquire Trigger&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 2 is waiting for the acquire trigger.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Ch2 Waiting for Acquire Arm&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 2 is waiting for the acquire arm.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Instrument Locked&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;If a remote interface (GPIB, USB, or LAN) has a lock (see :SYSTem:LOCK:OWNer? command), this bit will be set. When a remote interface releases the lock (see :SYSTem:LOCK:NAME? command), this bit will be cleared.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Program Running&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;Program is running. 0 is set during the program memory execution is stopped.&#39;</span><span class="p">),</span>
                              <span class="p">(</span><span class="s1">&#39;Not used&#39;</span><span class="p">,</span> <span class="s1">&#39;0 is returned.&#39;</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">questionable_ccr</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Voltage Summary&#39;</span><span class="p">,</span> <span class="s1">&#39;Over voltage in channel 1, and/or 2.&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Current Summary&#39;</span><span class="p">,</span> <span class="s1">&#39;Over current in channel 1, and/or 2.&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Ch1 Output Protection&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;Output relay of the specified channel is opened by the automatic output off at compliance function.&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Ch2 Output Protection&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;Output relay of the specified channel is opened by the automatic output off at compliance function.&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Temperature Summary&#39;</span><span class="p">,</span> <span class="s1">&#39;Over temperature in channel 1, and/or 2.&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Not used&#39;</span><span class="p">,</span> <span class="s1">&#39;0 is returned.&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Not used&#39;</span><span class="p">,</span> <span class="s1">&#39;0 is returned.&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Not used&#39;</span><span class="p">,</span> <span class="s1">&#39;0 is returned.&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Calibration&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 1 and/or 2 failed calibration.&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Self-test&#39;</span><span class="p">,</span> <span class="s1">&#39;Channel 1 and/or 2 failed self-test.&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Interlock&#39;</span><span class="p">,</span> <span class="s1">&#39;Interlock circuit is open.&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Ch1 Transition Event Lost&#39;</span><span class="p">,</span> <span class="s1">&#39;Lost arm or trigger transition event on channel 1&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Ch1 Acquire Event Lost&#39;</span><span class="p">,</span> <span class="s1">&#39;Lost arm or trigger acquire event on channel 1&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Ch2 Transition Event Lost&#39;</span><span class="p">,</span> <span class="s1">&#39;Lost arm or trigger transition event on channel 2&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Ch2 Acquire Event Lost&#39;</span><span class="p">,</span> <span class="s1">&#39;Lost arm or trigger acquire event on channel 2&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;Not used&#39;</span><span class="p">,</span> <span class="s1">&#39;0 is returned.&#39;</span><span class="p">)]</span>
        <span class="c1"># error messages</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">err_msg</span> <span class="o">=</span> <span class="p">{</span><span class="o">-</span><span class="mi">100</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Command error: Generic syntax error that cannot be determined more specifically.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">101</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Invalid character: An invalid character for the type of a syntax element was received; for example, a header containing an ampersand.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">102</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Syntax error: An unrecognized command or data type was received; for example, a string was received when B2901A does not accept strings.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">103</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Invalid separator: An illegal character was received when a separator was expected; for example, the semicolon was omitted after a program message unit.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">104</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Data type error: An improper data type was received; for example, numeric data was expected but string data was received.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">105</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;GET not allowed: A group execute trigger was received within a program message.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">108</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Parameter not allowed: Too many parameters for the command were received.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">109</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Missing parameter: Fewer parameters were received than required for the command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">110</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Command header error: An error was detected in the header. This error message is reported if B2901A cannot determine the more specific header errors -111 through -114.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">111</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Header separator error: An illegal character for a header separator was received; for example, no white space between the header and parameter.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">112</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Program mnemonic too long: A keyword in the command header contains more than twelve characters.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">113</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Undefined header: An undefined command header was received; for example, *XYZ.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">114</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Header suffix out of range: The value of a numeric suffix attached to a program mnemonic is out of range; for example, :OUTP3:FILT:AUTO specifies illegal channel number 3.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">120</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Numeric data error: Numeric (including the non-decimal numeric types) data error. This error message is reported when B2901A cannot determine the more specific errors -121 through -128.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">121</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Invalid character in number: An invalid character for the data type was received; for example, an alpha-character was received when the type was decimal numeric.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">123</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Exponent too large: The magnitude of the exponent was larger than 32000.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">124</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Too many digits: The mantissa of a decimal numeric data contained more than 255 digits excluding leading zeros.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">128</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Numeric data not allowed: Numeric data is not allowed in this position for this command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">130</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Suffix error: An error was detected in the suffix. This error message is reported if B2901A cannot determine the more specific suffix errors -131 through -138.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">131</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Invalid suffix: The suffix does not follow the correct syntax or the suffix is inappropriate.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">134</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Suffix too long: The suffix contains more than 12 characters.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">138</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Suffix not allowed: A suffix was received after a numeric parameter that does not allow suffixes.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">140</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Character data error: An error was detected in a character parameter. This error message is reported if B2901A cannot determine the more specific errors -141 through -148.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">141</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Invalid character data: Either the character parameter contains an invalid character or the particular element received is not valid for the command header.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">144</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Character data too long: The character parameter contains more than 12 characters.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">148</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Character data not allowed: A character parameter is not allowed for this position.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">150</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;String data error: An error was detected in a string parameter. This error is reported if B2901A cannot determine a more specific error -151 and -158.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">151</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Invalid string data: An invalid string parameter data was received; for example, an END message was received before the terminal quote character.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">158</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;String data not allowed: A string parameter data was received but was not allowed at this point.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">160</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Block data error: An error was detected in a block data. This error is reported if B2901A cannot determine more specific errors -161 and -168.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">161</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Invalid block data: An invalid block data was received; for example, an END message was received before the length was satisfied.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">168</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Block data not allowed: A legal block data was received but was not allowed at this point.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">170</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Expression error: An error was detected in an expression. This error is reported if B2901A cannot determine more specific errors -171 and -178.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">171</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Invalid expression: The expression was invalid; for example, unmatched parentheses or an illegal character.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">178</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Expression data not allowed: An expression was received but was not allowed at this point.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">200</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Execution error: Generic execution error for B2901A that cannot be determined more specifically.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">220</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Parameter error; Invalid channel list | Parameter error; Invalid group definition: Invalid channel list or group definition was specified. Set appropriate value.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">221</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Settings conflict; message; channel n: A specified parameter setting could not be executed due to the present device state. Check the settings specified by message and channel n, and set appropriate value.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">222</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Data out of range; message; channel n: Interpreted value of the program was out of range as defined by B2900. Check the B2901A settings specified by message and channel n, and set appropriate value.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">223</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Too much data: Too many parameters were sent. Reduce number of list data.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">224</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Illegal parameter value: Illegal parameter value was sent. Set appropriate parameter value.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">230</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Data corrupt or stale: Possibly invalid data; new reading started but not completed since last access.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">231</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Data questionable: Measurement accuracy is suspect.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">232</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Invalid format: The data format or structure is inappropriate.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">233</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Invalid version: The version of the data format is incorrect to the instrument.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">240</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Hardware error: A hardware problem in B2900. This error message is reported if B2901A cannot detect the more specific error -241.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">241</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Hardware missing; To recover channel, execute *TST?. A program command or query could not be executed because of missing hardware; for example, an option was not installed. Execute the *TST? command to recover or unlock channel.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">300</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Device-specific error: Generic device-dependent error for B2901A that cannot be determined more specifically.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">310</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;System error: Some error, termed “system error” by B2900, has occurred.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">311</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Memory error: An error was detected in B2900’s memory.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">313</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calibration memory lost; Calibration data has been lost, Calibration data is initialized; Channel n, Calibration memory lost; Nonvolatile data saved by the *CAL? command has been lost; Channel n: Non-volatile data related to the *CAL? command has been lost.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">315</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Configuration memory lost: Non-volatile configuration data saved by B2901A has been lost.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">321</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Out of memory: Too many data was sent at a time.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">350</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Queue overflow: This code is entered into the queue instead of the code that caused the error. This code indicates that there is no room in the queue and an error occurred but was not recorded.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">400</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Query error: Generic query error for B2901A that cannot be determined more specifically.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">410</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Query INTERRUPTED: A condition causing an INTERRUPTED query error occurred; for example, a query followed by DAB or GET before a response was completely sent.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">420</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Query UNTERMINATED: A condition causing an UNTERMINATED query error occurred; for example, B2901A was addressed to talk and an incomplete program message was received.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">430</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Query DEADLOCKED: A condition causing a DEADLOCKED query error occurred; for example, both input buffer and output buffer are full and B2901A cannot continue.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="o">-</span><span class="mi">440</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Query UNTERMINATED after indefinite response: A query was received in the same program message after a query requesting an indefinite length response was executed.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">101</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Wrong password&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">102</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Enter password for calibration&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">103</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Data load failed&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">104</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Data save failed&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">111</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-calibration failed; Voltage offset: Failed the voltage offset self-calibration specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">112</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-calibration failed; Current offset, item; channel n: Failed the current offset self-calibration specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">113</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-calibration failed; Voltage gain, item; channel n: Failed the voltage gain self-calibration specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">114</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-calibration failed; Current gain, item; channel n: Failed the current gain self-calibration specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">115</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-calibration failed; CMR DAC, item; channel n: Failed the CMR DAC self-calibration specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">121</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test failed; CPU communication, item; channel n: Failed the CPU communication test specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">122</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test failed; Fan status, item; channel n: Failed the fan status test specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">131</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test failed; SMU communication, item; channel n: Failed the SMU communication test specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">132</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test failed; CPLD access, item; channel n: Failed the CPLD access test specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">133</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test failed; Trigger count, item; channel n: Failed the trigger count test specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">134</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test failed; DAC/ADC, item; channel n: Failed the DAC/ADC test specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">135</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test failed; Loop control, item; channel n: Failed the loop control test specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">136</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test failed; I sense, item; channel n: Failed the current sense test specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">137</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test failed; V sense, item; channel n: Failed the voltage sense test specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">138</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test failed; F-COM comparison, item; channel n: Failed the F-COM comparison test specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">139</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test failed; V switch, item; channel n: Failed the voltage switch test specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">140</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test failed; Temperature sensor, item; channel n: Failed the temperature sensor test specified by item and channel n.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">141</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Self-test skipped; To recover channel, execute *TST?: 201 Not able to perform requested operation&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">202</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Not allowed; Instrument locked by another I/O session: The requested operation is not allowed because the instrument is locked by another I/O session. The instrument must be unlocked.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">203</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Not able to execute while instrument is measuring&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">210</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Operation is not completed: Operation is still in progress. Wait for operation complete.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">211</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Cannot switch low sense terminal with output on: Output relay must be off to switch low sense terminal.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">212</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Output relay must be on: Output relay must be on to perform the requested operation.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">213</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Output relay must be off: Output relay must be off to perform the requested operation.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">214</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Display must be enabled: Display is currently disabled. Set remote display on.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">215</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Remote sensing must be on: Remote sensing must be on to perform the requested operation.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">216</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Auto resistance measurement must be off: Automatic resistance measurement must be off to perform the requested operation.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">290</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Not able to recall state: it is empty: 291 State file size error&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">292</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;State file corrupt&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">301</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Overvoltage status detected; Channel n: Overvoltage status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">302</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Overcurrent status(245 V) detected; Channel n: overcurrent status (245 V) was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">303</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Overcurrent status(35 &#39;V) detected; Channel n: overcurrent status (35 V) was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">304</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Over range current status detected; Channel n: Over range current status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">305</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; High temperature1 status detected; Channel n: High temperature 1 status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">306</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; High temperature2 status detected; Channel n: High temperature 2 status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">307</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; High temperature3 status detected; Channel n: High temperature 3 status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">308</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; High temperature4 status detected; Channel n: High temperature 4 status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">311</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Abuse detected; Channel n: Abuse status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">312</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; F-COM(minus) abuse detected; Channel n: F-COM (minus) status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">313</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; F-COM(plus) abuse detected; Channel n: F-COM (plus) abuse status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">314</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Low sense(minus) abuse detected; Channel n: Low sense (minus) abuse status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">315</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Low sense(plus) abuse detected; Channel n: Low sense (plus) abuse status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">321</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; SMU main power supply failure detected; Channel n: SMU main power supply failure was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">322</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; SMU positive power supply failure detected; Channel n: SMU positive power supply failure was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">323</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; SMU negative power supply failure detected; Channel n: SMU negative power supply failure was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">324</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; SMU power supply was turned off; Channel n: SMU power supply was turned off because emergency status was detected in channel n. All channels were disabled. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">331</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Interlock open detected: Interlock open was detected. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command. Do not open interlock circuit while SMU is in high voltage state.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">341</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Fan speed is too slow: Too slow fan speed status was detected. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">342</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Fan speed is too fast: Too fast fan speed status was detected. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">351</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Internal communication failure detected by SMU; Channel n: Internal communication failure was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">352</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Watchdog timer expired; Channel n: Watchdog timer expired status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">353</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; F-COM CPLD reset detected; Channel n: F-COM CPLD reset status was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">354</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; VADC data was lost; Channel n: Channel n voltage ADC data was lost. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">355</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; IADC data was lost; Channel n: Channel n current ADC data was lost. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">356</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Sense data FIFO overflow detected; Channel n: Sense data FIFO overflow was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">361</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Internal communication failure detected by CPU; Channel n: Channel n internal communication failure was detected by CPU. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">362</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Internal command queue overflow detected; Channel n: Internal command queue overflow was detected in channel n. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">363</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Sense data was not received for acquire: trigger; Channel n: Channel n sense data was not received for acquire trigger. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">364</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Unexpected sense data was received; Channel n: Unexpected sense data was received. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">365</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Sense data was not received in Timer period; Channel n: Data communication failure. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">366</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Emergency; Timestamp FIFO overflow detected; Channel n: Data communication failure. All channel output is changed to 0 V and the all output switch is opened. Execute the *TST? command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">600</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Some or all licenses from license file(s) could not be installed&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">700</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Program size overflow: Program memory cannot save the program. Reduce program size.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">701</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Invalid variable: Appropriate variable name must be specified.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">702</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Invalid variable number: Appropriate variable name must be specified.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">703</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Query command is not supported: Memory program cannot contain query command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">704</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Program is not selected: Appropriate program name must be specified.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">705</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Cannot execute program while another program is running: Another program is running. Execute the program after it is stopped.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">706</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Cannot execute program while this program is running: This program is running. Execute the program after it is stopped.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">707</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Cannot step program while program is running: Program is running. Step execution is effective when program is paused or stopped.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">708</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Cannot continue program while program is running: Program is running. Program continue is effective when program is paused.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">709</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Cannot continue program while program is stopped: Program is stopped. Program continue is effective when program is paused.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">710</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Program line is too long: Program memory cannot save the program. Reduce program line.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">711</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Variable length is too long: Variable contains too many data. Reduce variable length.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">712</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Unsupported command is used in program: Memory program cannot contain the specified command.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">713</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Cannot set multiple INIT commands in program line: A program line cannot contain multiple INIT commands.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">714</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Invalid character in program line: Program line contains invalid character. Use appropriate characters.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">715</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Invalid character in program name: Appropriate program name must be specified.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">716</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;ProgramMemory; Program count overflow: Program memory cannot save the program. Delete dispensable program.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">801</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Expression list full: Cannot save the expression. Delete dispensable expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">802</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Expression cannot be deleted: Cannot delete the specified expression. Specify erasable expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">803</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Missmatched parenthesis: Number of open and close parentheses must be the same.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">804</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Not a number of data handle: Expression contains invalid floating point number or symbol. Enter appropriate expression. Available symbols are VOLT, CURR, RES, TIME, and SOUR.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">805</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Mismatched brackets: Number of open and close brackets must be the same.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">806</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Entire expression not parsed: Expression is not correct. Enter appropriate expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">807</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Not an operator or number: Expression contains not an operator or not a number. Enter appropriate expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">811</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; parsing value: Expression contains invalid floating point number. Enter appropriate expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">812</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Invalid data handle index: Vector expression contains invalid index value of an array. Enter appropriate expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">813</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Divided by zero: Denominator must not be zero. Enter appropriate expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">814</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Log of zero: Expression cannot contain log 0. Enter appropriate expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">815</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Invalid binary format string is used: Data contains invalid binary format string. Enter appropriate expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">816</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Invalid hex format string is used: Data contains invalid hex format string. Enter appropriate expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">817</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Invalid channel number is used: Expression contains invalid channel number. Enter appropriate expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">818</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Null expression: Expression is not defined. Enter appropriate expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">819</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Null expression in parentheses: Expression contains empty parentheses. Enter appropriate expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">820</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Null expression in brackets: Expression contains empty brackets. Enter appropriate expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">821</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Fed disabled MATH for limit test: Limit test tried to feed the math result currently disabled. Enable the math expression.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">822</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Missmatched trigger counts: Trigger count of grouped channels must be the same.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">823</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Missmatched vector lengths: Vector length of grouped channels must be the same.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">824</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Calculate; Invalid character in math name: Appropriate math expression name must be specified.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">861</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Trace; Illegal with storage active: Storage device must be idle to perform the requested operation.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">862</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Trace; No trace data: Trace buffer must contain data to perform the requested operation.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">870</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Macro file size error: Macro file size error. Reduce file size.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">871</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Cannot create state data on non-volatile memory: 900 Internal system error&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">950</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Unsupported parameter: Conventional command set error. Specified parameter is not supported by B2900.&#39;&#39;&#39;</span><span class="p">,</span>
                        <span class="mi">951</span><span class="p">:</span> <span class="s1">&#39;&#39;&#39;Unsupported command: Conventional command set error. Specified command is not supported by B2900.&#39;&#39;&#39;</span><span class="p">}</span>
        <span class="c1"># reset</span>
        <span class="k">if</span> <span class="n">reset</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">set_sense_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_all</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:syst:beep:stat 0&#39;</span><span class="p">)</span>  <span class="c1"># disable beeper</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        sends a visa command &lt;cmd&gt;, waits until &quot;operation complete&quot; and raises eventual errors of the device.</span>

<span class="sd">        parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        cmd: str</span>
<span class="sd">            command that is send to the instrument via pyvisa and ni-visa backend.</span>

<span class="sd">        returns</span>
<span class="sd">        -------</span>
<span class="sd">        none</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;*OPC?&#39;</span><span class="p">))):</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_raise_error</span><span class="p">()</span>
        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_ask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        sends a visa command &lt;cmd&gt;, waits until &quot;operation complete&quot;, raises eventual errors of the device and returns the read answer &lt;ans&gt;.</span>

<span class="sd">        parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        cmd: str</span>
<span class="sd">            command that is send to the instrument via pyvisa and ni-visa backend.</span>

<span class="sd">        returns</span>
<span class="sd">        -------</span>
<span class="sd">        answer: str</span>
<span class="sd">            answer that is returned at query after the sent &lt;cmd&gt;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;?&#39;</span> <span class="ow">in</span> <span class="n">cmd</span><span class="p">:</span>
            <span class="n">ans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:s}</span><span class="s1">?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cmd</span><span class="p">))</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;*opc?&#39;</span><span class="p">))):</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_raise_error</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ans</span>

<div class="viewcode-block" id="Keysight_B2900.set_gpio_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_gpio_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_gpio_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">channel</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Assigns the input/output function to the specified GPIO pin &lt;channel&gt; to &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val: str</span>
<span class="sd">            GPIO specification. possible values are DINPut(default for the EXT1 to EXT13 pins) | DIO | HVOL(default for the EXT14 pin) | TINPut | TOUT</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of GPIO pin of interest. -1 means channel 1 to 14.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce]:DIGital:EXTernal[n][:FUNCtion] function</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set the GPIO mode of pin </span><span class="si">{!s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">channel</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">14</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;sour:dig:ext</span><span class="si">{:d}</span><span class="s1">:func </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;sour:dig:ext</span><span class="si">{:d}</span><span class="s1">:func </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;SOUR:DIG:DATA 16383&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ccr</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="mi">16383</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set the GPIO mode of pin </span><span class="si">{!s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set the GPIO mode of pin </span><span class="si">{!s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_gpio_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_gpio_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_gpio_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the assigned input/output function to the specified GPIO pin &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of GPIO pin of interest. -1 means channel 1 to 14.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: str</span>
<span class="sd">            GPIO specification. possible values are DINPut(default for the EXT1 to EXT13 pins) | DIO | HVOL(default for the EXT14 pin) | TINPut | TOUT</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce]:DIGital:EXTernal[n][:FUNCtion]?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get the GPIO mode of pin </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channel</span><span class="p">))</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;SOUR:DIG:EXT</span><span class="si">{:d}</span><span class="s1">:FUNC&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get the GPIO mode of pin </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channel</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get the GPIO mode of pin </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_digio">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_digio">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_digio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the output data to GPIO pin (digital control port) &lt;channel&gt; to &lt;status&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        status: bool, int</span>
<span class="sd">            Digital Output status.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of GPIO pin of interest.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce]:DIGital:DATA data</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set the digital output of pin </span><span class="si">{!s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">status</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ccr</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ccr</span><span class="p">[:</span><span class="o">-</span><span class="n">channel</span><span class="p">]</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="ow">not</span> <span class="p">(</span><span class="n">status</span><span class="p">)))</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccr</span><span class="p">[</span><span class="o">-</span><span class="n">channel</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:])[:</span><span class="mi">16</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;sour:dig:data </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ccr</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set the digital output of pin </span><span class="si">{!s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">status</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span>
                <span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set the digital output of pin </span><span class="si">{!s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_digio">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_digio">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_digio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the output data to GPIO pin (digital control port) &lt;channel&gt; to &lt;status&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        status: bool, int</span>
<span class="sd">            Digital Output status.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of GPIO pin of interest.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce]:DIGital:DATA?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get the digital output of pin </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channel</span><span class="p">))</span>
            <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;sour:dig:data?&#39;</span><span class="p">)))[</span><span class="o">-</span><span class="n">channel</span><span class="p">:][</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get the digital output of pin </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channel</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get the digital output of pin </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_measurement_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_measurement_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_measurement_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets measurement mode (wiring system) of channel &lt;channel&gt; to &lt;mode&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mode: int</span>
<span class="sd">            State of the measurement sense mode. Must be 0 (2-wire) or 1 (4-wire).</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SENSe[c]:REMote 1|0|ON|OFF</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set measurement mode</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:rem </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set measurement mode</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span> <span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set measurement mode</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span> <span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_sync">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_sync">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_sync</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the interchannel synchronization to &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        status: bool</span>
<span class="sd">            Inter-channel synchronization mode specifies whether two channels are to be operated in sync.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SYSTem: GROup[:DEFine]</span>
        <span class="c1"># Corresponding Command: :SYSTem: GROup:RESet</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set interchannel synchronization to </span><span class="si">{!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">status</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:syst:gro:def (@1,2)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">status</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:syst:gro:res&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set interchannel synchronization to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">status</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set interchannel synchronization to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sync">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sync">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sync</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the interchannel synchronization.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: bool</span>
<span class="sd">			Inter-channel synchronization mode specifies whether two channels are to be operated in sync.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SYSTem: GROup[:DEFine]?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get interchannel synchronization&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:syst:gro:def?&#39;</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get interchannel synchronization&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get interchannel synchronization</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_measurement_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_measurement_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_measurement_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets measurement mode (wiring system) &lt;mode&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        mode: int</span>
<span class="sd">            State of the measurement sense mode. Meanings are 0 (2-wire) and 1 (4-wire).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SENSe[c]:REMote?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get measurement mode</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:rem&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">])))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get measurement mode</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span>
                <span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get measurement mode</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span>
                                                                     <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_bias_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_bias_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_bias_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets bias mode of channel &lt;channel&gt; to mode &lt;mode&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mode: int</span>
<span class="sd">            Bias mode. Must be 0 (current) or 1 (voltage).</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:FUNCtion:MODE VOLTage|CURRent</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set bias mode</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:func:mode </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="n">mode</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_range</span><span class="p">(</span><span class="n">val</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># set bias range to &quot;auto&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;:sens</span><span class="si">{:s}</span><span class="s1">:func:on &quot;</span><span class="si">{:s}</span><span class="s1">&quot;&#39;&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="n">mode</span><span class="p">]))</span>  <span class="c1"># enables same sense function to measure bias value</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set bias mode</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set bias mode</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_bias_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_bias_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_bias_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets bias mode &lt;mode&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        mode: int</span>
<span class="sd">            Bias mode. Meanings are 0 (current) and 1 (voltage).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:FUNCtion:MODE?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get bias mode</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:func:mode&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span><span class="o">.</span><span class="n">lower</span><span class="p">())])</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get bias mode</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get bias mode</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_sense_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_sense_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_sense_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets sense mode of channel &lt;channel&gt; to mode &lt;mode&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mode: int</span>
<span class="sd">            Sense mode. Must be 0 (current), 1 (voltage) or or 2 (resistance).</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SENSe[c]:FUNCtion[:ON] function[, function[, function]]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sense mode</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:func:on:all&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;:sens</span><span class="si">{:s}</span><span class="s1">:func:on &quot;</span><span class="si">{:s}</span><span class="s1">&quot;&#39;&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sour:func:mode&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>  <span class="c1"># turn on bias mode in order to measure bias values</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;:sens</span><span class="si">{:s}</span><span class="s1">:func:on &quot;</span><span class="si">{:s}</span><span class="s1">&quot;&#39;&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="n">mode</span><span class="p">]))</span>  <span class="c1"># turn on sense mode</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_sense_mode</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span> <span class="o">=</span> <span class="n">mode</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_sense_range</span><span class="p">(</span><span class="n">val</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense mode</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense mode</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sense_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sense_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sense_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets sense mode &lt;mode&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        mode: int</span>
<span class="sd">            Sense mode. Meanings are 0 (current) and 1 (voltage).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sense_mode</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sense_modes">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sense_modes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sense_modes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets all active sense modes &lt;mode&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        mode: int</span>
<span class="sd">            Sense mode. Meanings are 0 (current), 1 (voltage) and 2 (resistance).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:RANGe:AUTO?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sense mode</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="c1"># return str(self._ask(&#39;:sens:func:on?&#39;).replace(&#39;&#39;&#39;&quot;&#39;&#39;&#39;, &#39;&#39;)).lower().split(&#39;,&#39;)</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s2">&quot;:sens</span><span class="si">{:s}</span><span class="s2">:func:on?&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&quot;&#39;&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span>
                <span class="s1">&#39;,&#39;</span><span class="p">)]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense mode</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense mode</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_bias_range">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_bias_range">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_bias_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets bias range of channel &lt;channel&gt; to &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val: float</span>
<span class="sd">            Bias range. Possible values are -1 (auto), for currents 200nA, 2uA, 20uA, 200uA, 2mA, 20mA, 200mA, 1 A, 3A and for voltages 200mV, 2V, 7V, 18V.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:RANGe range</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:RANGe:AUTO mode</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set bias range</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:rang:auto 1&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">()]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:rang </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">()],</span> <span class="n">val</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set bias range</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set bias range</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_bias_range">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_bias_range">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_bias_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets bias mode &lt;val&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: float</span>
<span class="sd">            Bias range.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:RANGe?</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:RANGe:AUTO?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get bias range</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:rang&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">()])))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get bias range</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get bias range</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_sense_range">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_sense_range">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_sense_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets sense range of channel &lt;channel&gt; to &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val: float</span>
<span class="sd">           Sense range. Possible values are -1 (auto), for currents 200nA, 2uA, 20uA, 200uA, 2mA, 20mA, 200mA, 1 A, 3A and for voltages 200mV, 2V, 7V, 18V.</span>
<span class="sd">        channel: int</span>
<span class="sd">           Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SENSe[c]:&lt;CURRent[:DC]|RESistance|VOLTage[:DC]&gt;:RANGe:UPPer range</span>
        <span class="c1"># Corresponding Command: :SENSe[c]:&lt;CURRent[:DC]|RESistance|VOLTage[:DC]&gt;:RANGe:AUTO mode</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sense range</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:rang:auto 1&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sense_mode</span><span class="p">[</span><span class="n">channel</span><span class="p">]]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:rang:upp </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sense_mode</span><span class="p">[</span><span class="n">channel</span><span class="p">]],</span> <span class="n">val</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense range</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense range</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sense_range">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sense_range">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sense_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets sense range &lt;val&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: float</span>
<span class="sd">            Sense range.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SENSe[c]:&lt;CURRent[:DC]|RESistance|VOLTage[:DC]&gt;:RANGe:UPPer? [range]</span>
        <span class="c1"># Corresponding Command: :SENSe[c]:&lt;CURRent[:DC]|RESistance|VOLTage[:DC]&gt;:RANGe:AUTO?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sense range</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:rang:upp?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sense_mode</span><span class="p">[</span><span class="n">channel</span><span class="p">]])))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense range</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense range</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_sense_limit">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_sense_limit">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_sense_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets sense compliance limit of channel &lt;channel&gt; to &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val: float</span>
<span class="sd">           Sense compliance limit.</span>
<span class="sd">        channel: int</span>
<span class="sd">           Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SENS[c]:CURR[:DC]:PROT[:LEV][:BOTH] comp</span>
        <span class="c1"># Corresponding Command: :SENS[c]:VOLT[:DC]:PROT[:LEV] comp</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sense compliance limit</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:prot </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sense_mode</span><span class="p">[</span><span class="n">channel</span><span class="p">]],</span> <span class="n">val</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense compliance limit</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense compliance limit</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sense_limit">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sense_limit">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sense_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets sense compliance limit &lt;val&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: float</span>
<span class="sd">            Sense compliance limit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SENS[c]:CURR[:DC]:PROT[:LEV]? [DEFault | MINimum | MAXimum]</span>
        <span class="c1"># Corresponding Command: :SENS[c]:VOLT[:DC]:PROT[:LEV]? [DEFault | MINimum | MAXimum]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sense compliance limit</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:prot?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sense_mode</span><span class="p">[</span><span class="n">channel</span><span class="p">]])))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense compliance limit</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense compliance limit</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_bias_trigger">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_bias_trigger">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_bias_trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">val</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets bias trigger mode of channel &lt;channel&gt; to &lt;mode&gt; and optional value &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mode: str</span>
<span class="sd">            Bias trigger mode. Must be &#39;ext&#39; (external), &#39;aux&#39; (auxiliary), &#39;tim&#39; (timer) or &#39;sens&#39; (sense).</span>
<span class="sd">            AINT (default)|BUS|TIMer|INT1|INT2|LAN|EXT1|EXT2|EXT3|EXT4|EXT5|EXT6|EXT7|EXT8|EXT9|EXT10|EXT11|EXT12|EXT13|EXT14</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>
<span class="sd">        time: float, optional</span>
<span class="sd">            Time trigger period if &lt;mode&gt; is &#39;timer&#39;. Must be in [100µs, 3600s].</span>
<span class="sd">        pol: int, optional</span>
<span class="sd">            Polarity of auxiliary trigger if &lt;mode&gt; is &#39;aux&#39;. Must be 0 (falling edge) or 1 (rising edge).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :TRIGger&lt;:ACQuire|:TRANsient|[:ALL]&gt;:SOURce[:SIGNal] AINT (default)|BUS|TIMer|INT1|INT2|LAN|EXT1|EXT2|EXT3|EXT4|EXT5|EXT6|EXT7|EXT8|EXT9|EXT10|EXT11|EXT12|EXT13|EXT14</span>
        <span class="c1"># Corresponding Command: :TRIGger&lt;:ACQuire|:TRANsient|[:ALL]&gt;:TIMer</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set bias trigger</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig:tran:sour: </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode</span><span class="p">))</span>
            <span class="k">if</span> <span class="s1">&#39;time&#39;</span> <span class="ow">in</span> <span class="n">val</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set bias trigger timer</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:s}</span><span class="s1">s&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="mf">50e-3</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig:tran:</span><span class="si">{:s}</span><span class="s1"> </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">val</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="mf">50e-3</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set bias trigger</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set bias trigger</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_bias_trigger">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_bias_trigger">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_bias_trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets bias trigger of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        mode: str</span>
<span class="sd">            Bias trigger mode. Meanings are &#39;ext&#39; (external), &#39;aux&#39; (auxiliary), &#39;tim1&#39; (timer1), &#39;tim2&#39; (timer2) and &#39;sens&#39; (sense).</span>
<span class="sd">        time: float, optional</span>
<span class="sd">            Time trigger period if &lt;mode&gt; is &#39;timer&#39;.</span>
<span class="sd">        pol: int, optional</span>
<span class="sd">            Polarity of auxiliary trigger if &lt;mode&gt; is &#39;aux&#39;. Meanings are 0 (falling edge) and 1 (rising edge).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :TRIGger&lt;:ACQuire|:TRANsient|[:ALL]&gt;:SOURce[:SIGNal] AINT (default)|BUS|TIMer|INT1|INT2|LAN|EXT1|EXT2|EXT3|EXT4|EXT5|EXT6|EXT7|EXT8|EXT9|EXT10|EXT11|EXT12|EXT13|EXT14</span>
        <span class="c1"># Corresponding Command: :TRIGger&lt;:ACQuire|:TRANsient|[:ALL]&gt;:TIMer</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get bias trigger</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:trig:tran:sour&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;tim&#39;</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get bias trigger timer</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
                <span class="n">val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:trig:tran:</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode</span><span class="p">)))</span>
                <span class="k">return</span> <span class="n">mode</span><span class="p">,</span> <span class="n">val</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">mode</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get bias trigger</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get bias trigger</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_sense_trigger">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_sense_trigger">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_sense_trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">val</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets sense trigger mode of channel &lt;channel&gt; to &lt;mode&gt; and optional value &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mode: str</span>
<span class="sd">            Bias trigger mode. Must be &#39;ext&#39; (external), &#39;aux&#39; (auxiliary), &#39;tim&#39; (timer) or &#39;sens&#39; (sense).</span>
<span class="sd">            AINT (default)|BUS|TIMer|INT1|INT2|LAN|EXT1|EXT2|EXT3|EXT4|EXT5|EXT6|EXT7|EXT8|EXT9|EXT10|EXT11|EXT12|EXT13|EXT14</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>
<span class="sd">        time: float, optional</span>
<span class="sd">            Time trigger period if &lt;mode&gt; is &#39;timer&#39;. Must be in [100µs, 3600s].</span>
<span class="sd">        pol: int, optional</span>
<span class="sd">            Polarity of auxiliary trigger if &lt;mode&gt; is &#39;aux&#39;. Must be 0 (falling edge) or 1 (rising edge).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :TRIGger&lt;:ACQuire|:TRANsient|[:ALL]&gt;:SOURce[:SIGNal] AINT (default)|BUS|TIMer|INT1|INT2|LAN|EXT1|EXT2|EXT3|EXT4|EXT5|EXT6|EXT7|EXT8|EXT9|EXT10|EXT11|EXT12|EXT13|EXT14</span>
        <span class="c1"># Corresponding Command: :TRIGger&lt;:ACQuire|:TRANsient|[:ALL]&gt;:TIMer</span>
        <span class="c1">### TODO: set counter</span>
        <span class="c1">### TODO: continuous measurement (same as &quot;Auto&quot; key)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sense trigger</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig:acq:sour: </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode</span><span class="p">))</span>
            <span class="k">if</span> <span class="s1">&#39;time&#39;</span> <span class="ow">in</span> <span class="n">val</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sense trigger timer</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:s}</span><span class="s1">s&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="mf">50e-3</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig:acq:</span><span class="si">{:s}</span><span class="s1"> </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">val</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="mf">50e-3</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense trigger</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense trigger</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">mode</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sense_trigger">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sense_trigger">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sense_trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets sense trigger of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        mode: str</span>
<span class="sd">            Bias trigger mode. Meanings are &#39;ext&#39; (external), &#39;aux&#39; (auxiliary), &#39;tim1&#39; (timer1), &#39;tim2&#39; (timer2) and &#39;sens&#39; (sense).</span>
<span class="sd">        time: float, optional</span>
<span class="sd">            Time trigger period if &lt;mode&gt; is &#39;timer&#39;.</span>
<span class="sd">        pol: int, optional</span>
<span class="sd">            Polarity of auxiliary trigger if &lt;mode&gt; is &#39;aux&#39;. Meanings are 0 (falling edge) and 1 (rising edge).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :TRIGger&lt;:ACQuire|:TRANsient|[:ALL]&gt;:SOURce[:SIGNal] AINT (default)|BUS|TIMer|INT1|INT2|LAN|EXT1|EXT2|EXT3|EXT4|EXT5|EXT6|EXT7|EXT8|EXT9|EXT10|EXT11|EXT12|EXT13|EXT14</span>
        <span class="c1"># Corresponding Command: :TRIGger&lt;:ACQuire|:TRANsient|[:ALL]&gt;:TIMer</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sense trigger</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:trig:acq:sour&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;tim&#39;</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sense trigger timer</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
                <span class="n">val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:trig:tran:</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode</span><span class="p">)))</span>
                <span class="k">return</span> <span class="n">mode</span><span class="p">,</span> <span class="n">val</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">mode</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense trigger</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense trigger</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_bias_delay">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_bias_delay">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_bias_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets bias delay with respect to the bias trigger to the value &lt;val&gt; that is calculated internally by</span>
<span class="sd">            if status is True:</span>
<span class="sd">                if auto = True:</span>
<span class="sd">                    val = gain*initial_wait_time + offset</span>
<span class="sd">                else:</span>
<span class="sd">                    val = offset</span>
<span class="sd">            else:</span>
<span class="sd">                val = 0</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        offset: float</span>
<span class="sd">            Offset value used for calculating the source wait time for the specified channel. Can be between 0 and 1 seconds, MINimum, MAXimum or DEFault. Default is 0.</span>
<span class="sd">        status: bool</span>
<span class="sd">        auto: bool</span>
<span class="sd">            Initial wait time used for calculating the source wait time for the specified channel.</span>
<span class="sd">        gain: float</span>
<span class="sd">            Gain value used for calculating the source wait time for the specified channel. Can be between 0 and 100, MINimum, MAXimum or DEFault. Default is 1.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:WAIT:AUTO 0|OFF|1|ON</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:WAIT:GAIN gain</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:WAIT:OFFSet offset</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:WAIT[:STATe] 0|OFF|1|ON</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set bias delay status</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">status</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:wait:stat </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">status</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set bias delay status</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">status</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set bias delay status</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">status</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set bias delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">offset</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:wait:offs </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">offset</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set bias delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">offset</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set bias delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">offset</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;auto&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">auto</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set auto bias delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">auto</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:wait:auto </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">auto</span><span class="p">)))</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set auto bias delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">auto</span><span class="p">))</span>
                <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set auto bias delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">auto</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;gain&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">gain</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gain&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set gain bias delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">gain</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:wait:gain </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">gain</span><span class="p">)))</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set gain bias delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">gain</span><span class="p">))</span>
                <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set gain bias delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">gain</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_bias_delay">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_bias_delay">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_bias_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets bias delay &lt;val&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: dict</span>
<span class="sd">            Sense delay with respect to the bias trigger.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:WAIT:AUTO?</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:WAIT:GAIN? [gain]</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:WAIT:OFFSet? [offset]</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:WAIT[:STATe]?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get bias delay</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:wait:stat?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">])))),</span>
                <span class="s1">&#39;offset&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:wait:offs?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))),</span>
                <span class="s1">&#39;auto&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:wait:auto?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">])))),</span>
                <span class="s1">&#39;gain&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:wait:gain?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">])))}</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get bias delay</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get bias delay</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_sense_delay">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_sense_delay">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_sense_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets sense delay with respect to the sense trigger to the value &lt;val&gt; that is calculated internally by</span>
<span class="sd">            if status is True:</span>
<span class="sd">                if auto = True:</span>
<span class="sd">                    val = gain*initial_wait_time + offset</span>
<span class="sd">                else:</span>
<span class="sd">                    val = offset</span>
<span class="sd">            else:</span>
<span class="sd">                val = 0</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        offset: float</span>
<span class="sd">            Offset value used for calculating the sense wait time for the specified channel. Can be between 0 and 1 seconds, MINimum, MAXimum or DEFault. Default is 0.</span>
<span class="sd">        status: bool</span>
<span class="sd">        auto: bool</span>
<span class="sd">            Initial wait time used for calculating the sense wait time for the specified channel.</span>
<span class="sd">        gain: float</span>
<span class="sd">            Gain value used for calculating the sense wait time for the specified channel. Can be between 0 and 100, MINimum, MAXimum or DEFault. Default is 1.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SENSe[c]]:WAIT:AUTO 0|OFF|1|ON</span>
        <span class="c1"># Corresponding Command: [:SENSe[c]]:WAIT:GAIN gain</span>
        <span class="c1"># Corresponding Command: [:SENSe[c]]:WAIT:OFFSet offset</span>
        <span class="c1"># Corresponding Command: [:SENSe[c]]:WAIT[:STATe] 0|OFF|1|ON</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sense delay status</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">status</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:wait:stat </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">status</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense delay status</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">status</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense delay status</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">status</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sense delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">offset</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:wait:offs </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">offset</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">offset</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">offset</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;auto&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">auto</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set auto sense delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">auto</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:wait:auto </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">auto</span><span class="p">)))</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set auto sense delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">auto</span><span class="p">))</span>
                <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set auto sense delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">auto</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;gain&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">gain</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gain&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set gain sense delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">gain</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:wait:gain </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">gain</span><span class="p">)))</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set gain sense delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">gain</span><span class="p">))</span>
                <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set gain sense delay</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">gain</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sense_delay">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sense_delay">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sense_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets sense delay &lt;val&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: dict</span>
<span class="sd">            Sense delay with respect to the bias trigger.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SENSe[c]]:WAIT:AUTO?</span>
        <span class="c1"># Corresponding Command: [:SENSe[c]]:WAIT:GAIN? [gain]</span>
        <span class="c1"># Corresponding Command: [:SENSe[c]]:WAIT:OFFSet? [offset]</span>
        <span class="c1"># Corresponding Command: [:SENSe[c]]:WAIT[:STATe]?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sense delay</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:wait:stat?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">])))),</span>
                <span class="s1">&#39;offset&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:wait:offs?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))),</span>
                <span class="s1">&#39;auto&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:wait:auto?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">])))),</span>
                <span class="s1">&#39;gain&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:wait:gain?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">])))}</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense delay</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense delay</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_plc">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_plc">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_plc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plc</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets power line cycle (PLC) to &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        plc: int</span>
<span class="sd">            Power line frequency setting used for NPLC calculations. Possible values are 50 or 60.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SYSTem:LFRequency</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set PLC to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">plc</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;syst:lfr </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">plc</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set PLC to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">plc</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set PLC to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">plc</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_plc">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_plc">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_plc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets power line cycle (PLC) &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        plc: int</span>
<span class="sd">            Power line frequency setting used for NPLC calculations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SYSTem:LFRequency?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get PLC&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;syst:lfr&#39;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get PLC&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get PLC</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_sense_nplc">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_sense_nplc">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_sense_nplc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets sense nplc (number of power line cycle) of channel &lt;channel&gt; with the &lt;val&gt;-fold of one power line cycle.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>
<span class="sd">        val: float</span>
<span class="sd">            Integration aperture for measurements. Must be &#39;min&#39; (minimum), &#39;max&#39; (maximum), &#39;def&#39; (default) or in [4e-4 to 100], [4.8e-4 to 120] for 50 Hz, 60 Hz, respectively.</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SENSe[c]:&lt;CURRent[:DC]|RESistance|VOLTage[:DC]&gt;:NPLCycles nplc</span>
        <span class="c1"># Corresponding Command: :SENSe[c]:&lt;CURRent[:DC]|RESistance|VOLTage[:DC]&gt;:NPLCycles:AUTO mode</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sense nplc</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span>
                                                                    <span class="o">*</span><span class="p">[</span><span class="s1">&#39;auto&#39;</span> <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="k">else</span> <span class="n">val</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:nplc</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span>
                                                         <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sense_mode</span><span class="p">[</span><span class="n">channel</span><span class="p">]],</span>
                                                         <span class="o">*</span><span class="p">[</span><span class="s1">&#39;:auto 1&#39;</span> <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="k">else</span> <span class="s1">&#39; </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">)]))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense nplc</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span>
                                                                 <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sense nplc</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span>
                                                                                 <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span>
                                                                                     <span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sense_nplc">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sense_nplc">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sense_nplc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets sense nplc (number of power line cycle) &lt;val&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: float</span>
<span class="sd">            Integration aperture for measurements.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SENSe[c]:&lt;CURRent[:DC]|RESistance|VOLTage[:DC]&gt;:NPLCycles? [nplc]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sense nplc</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sens</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:nplc&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sense_mode</span><span class="p">[</span><span class="n">channel</span><span class="p">]])))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense nplc</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense nplc</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sense_average">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sense_average">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sense_average</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_status">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_status">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets output status of channel &lt;channel&gt; to &lt;status&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        status: int</span>
<span class="sd">            Output status. Possible values are 0 (off) or 1 (on).</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :OUTPut[c][:STATe] 1|ON|0|OFF</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set output status</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">status</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:outp</span><span class="si">{:s}</span><span class="s1">:stat </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">status</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set output status</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">status</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set output status</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">status</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_status">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_status">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets output status &lt;status&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        status: int</span>
<span class="sd">            Output status. Meanings are 0 (off) and 1 (on).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :OUTPut[c][:STATe]?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get output status</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:outp</span><span class="si">{:s}</span><span class="s1">:stat&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get output status</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get output status</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_bias_value">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_bias_value">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_bias_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;&quot;</span>
<span class="sd">        Sets bias value of channel &lt;channel&gt; to value &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val: float</span>
<span class="sd">            Bias value.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOUR[c]]:VOLT: voltage</span>
        <span class="c1"># Corresponding Command: :DISPlay:VIEW mode</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set bias value</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:lev </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)],</span> <span class="n">val</span><span class="p">))</span>  <span class="c1"># necessary to cast as scientific float! (otherwise only &gt;= 1e-6 possible)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:disp:view sing</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set bias value</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set bias value</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_bias_value">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_bias_value">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_bias_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets bias value &lt;val&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: float</span>
<span class="sd">            Bias value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: voltage = [:SOUR[c]]:VOLT?</span>
        <span class="c1"># Corresponding Command: :MEASure: &lt; CURRent[:DC] | RESistance | VOLTage[:DC] &gt;? [chanlist]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get bias value</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="c1"># return float(self._ask(&#39;:sour{:s}:{:s}?&#39;.format(self._cmd_chans[self._channels][channel], self._IV_modes[self.get_bias_mode(channel=channel)])))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:disp:view sing</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">channel</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:meas:</span><span class="si">{:s}</span><span class="s1">?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)]))</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+9.910000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;nan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;9.900000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;inf&#39;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:lev&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)])))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get bias value</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get bias value</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sense_value">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sense_value">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sense_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets sense value of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: float</span>
<span class="sd">            Sense value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:CHANnel&lt;n&gt;]:MEASure?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sense value</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:disp:view sing</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:meas:</span><span class="si">{:s}</span><span class="s1">?&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sense_mode</span><span class="p">[</span><span class="n">channel</span><span class="p">]]))</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+9.910000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;nan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;9.900000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;inf&#39;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense value</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense value</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sense_values">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sense_values">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sense_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets sense values of all active sense modes of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: numpy.array</span>
<span class="sd">            Sense values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :MEAS? [chanlist]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sense values of all active sense modes</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:disp:view sing</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:meas?&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+9.910000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;nan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;9.900000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense values of all active sense modes</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sense values of all active sense modes</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_voltage">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_voltage">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets voltage value of channel &lt;channel&gt; to &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val: float</span>
<span class="sd">            Bias voltage value.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOUR[c]]:VOLT: voltage</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:s}</span><span class="s1">: Set voltage value</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:volt </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:disp:view sing</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set voltage value</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set voltage value</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_voltage">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_voltage">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets voltage value &lt;val&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: float</span>
<span class="sd">            Sense voltage value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: voltage = [:SOUR[c]]:VOLT?</span>
        <span class="c1"># Corresponding Command: :MEASure: &lt; CURRent[:DC] | RESistance | VOLTage[:DC] &gt;? [chanlist]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:s}</span><span class="s1">: Get voltage value</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:disp:view sing</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
            <span class="c1"># return float(self._ask(&#39;:sour{:s}:volt?&#39;.format(self._cmd_chans[self._channels][channel])))</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:meas:volt?&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+9.910000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;nan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;9.900000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;inf&#39;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get voltage value</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get voltage value</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_current">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_current">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets current value of channel &lt;channel&gt; to &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val: float</span>
<span class="sd">            Bias current value.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOUR[c]]:CURR: current</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:s}</span><span class="s1">: Set current value</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:curr </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:disp:view sing</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set current value</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set current value</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_current">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_current">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets current value &lt;val&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: float</span>
<span class="sd">            Sense current value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: voltage = [:SOUR[c]]:VOLT?</span>
        <span class="c1"># Corresponding Command: :READ[:SCALar]: &lt;CURRent|RESistance|SOURce|STATus|TIME|VOLTage&gt;? [chanlist]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:s}</span><span class="s1">: Get current value</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:disp:view sing</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
            <span class="c1"># return float(self._ask(&#39;:sour{:s}:curr?&#39;.format(self._cmd_chans[self._channels][channel])))</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:meas:curr?&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+9.910000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;nan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;9.900000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;inf&#39;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get current value</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get current value</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_resistance">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_resistance">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_resistance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets resistance value &lt;val&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: float</span>
<span class="sd">            Sense resistance value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: voltage = [:SOUR[c]]:VOLT?</span>
        <span class="c1"># Corresponding Command: :READ[:SCALar]: &lt;CURRent|RESistance|SOURce|STATus|TIME|VOLTage&gt;? [chanlist]</span>
        <span class="c1"># Corresponding Command: :MEASure:&lt;CURRent[:DC]|RESistance|VOLTage[:DC]&gt;? [chanlist]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:s}</span><span class="s1">: Get resistance value</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:disp:view sing</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
            <span class="c1"># return float(self._ask(&#39;:sour{:s}:res?&#39;.format(self._cmd_chans[self._channels][channel])))</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:meas:res?&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+9.910000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;nan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;9.900000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;inf&#39;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get resistance value</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get resistance value</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_IV">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_IV">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_IV</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets both current value &lt;I_val&gt; and voltage value &lt;V_val&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">           Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        I_val: float</span>
<span class="sd">            Sense current value.</span>
<span class="sd">        V_val: float</span>
<span class="sd">            Sense voltage value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :MEASure? [chanlist]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:s}</span><span class="s1">: Get current and voltage value</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:disp:view sing</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:meas?&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+9.910000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;nan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;9.900000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)[:</span><span class="mi">2</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get current and voltage value</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get current and voltage value</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.ramp_bias">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.ramp_bias">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">ramp_bias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">step_time</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ramps bias value of channel &lt;channel&gt; from recent value to stop value &lt;stop&gt; with step size &lt;step&gt; and step time &lt;step_time&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        stop: float</span>
<span class="sd">            Stop value</span>
<span class="sd">        step: float</span>
<span class="sd">            Step size.</span>
<span class="sd">        step_time: float</span>
<span class="sd">            Sleep time between staircase ramp.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1. (default)</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bias_value</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">stop</span> <span class="o">&lt;</span> <span class="n">start</span><span class="p">:</span>
            <span class="n">step</span> <span class="o">=</span> <span class="o">-</span><span class="n">step</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span> <span class="o">+</span> <span class="n">step</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_value</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:f}{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_units</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">()]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\r</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">step_time</span><span class="p">)</span></div>


<div class="viewcode-block" id="Keysight_B2900.ramp_voltage">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.ramp_voltage">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">ramp_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">step_time</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ramps voltage of channel &lt;channel&gt; from recent value to stop value &lt;stop&gt; with step size &lt;step&gt; and step time &lt;step_time&gt; according to bias_mode.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        stop: float</span>
<span class="sd">            Stop voltage value</span>
<span class="sd">        step: float</span>
<span class="sd">            Step voltage size.</span>
<span class="sd">        step_time: float</span>
<span class="sd">            Sleep time between voltage staircase ramp.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1. (default)</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">):</span>  <span class="c1"># 1 (voltage bias)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ramp_bias</span><span class="p">(</span><span class="n">stop</span><span class="o">=</span><span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="n">step</span><span class="p">,</span> <span class="n">step_time</span><span class="o">=</span><span class="n">step_time</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">):</span>  <span class="c1"># 0 (current bias)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;: Cannot ramp voltage</span><span class="si">{:s}</span><span class="s1"> in the current bias&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;: Cannot ramp voltage</span><span class="si">{:s}</span><span class="s1"> in the current bias&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span></div>


<div class="viewcode-block" id="Keysight_B2900.ramp_current">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.ramp_current">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">ramp_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">step_time</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ramps current of channel &lt;channel&gt; from recent value to stop value &lt;stop&gt; with step size &lt;step&gt; and step time &lt;step_time&gt; according to bias_mode.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        stop: float</span>
<span class="sd">            Stop current value</span>
<span class="sd">        step: float</span>
<span class="sd">            Step current size.</span>
<span class="sd">        step_time: float</span>
<span class="sd">            Sleep time between current staircase ramp.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1. (default)</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">):</span>  <span class="c1"># 0 (current bias)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ramp_bias</span><span class="p">(</span><span class="n">stop</span><span class="o">=</span><span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="n">step</span><span class="p">,</span> <span class="n">step_time</span><span class="o">=</span><span class="n">step_time</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">):</span>  <span class="c1"># 1 (voltage bias)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;: Cannot ramp current</span><span class="si">{:s}</span><span class="s1"> in the voltage bias&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;: Cannot ramp current</span><span class="si">{:s}</span><span class="s1"> in the voltage bias&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_sweep_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_sweep_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_sweep_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="n">channels</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets an variable to decide weather</span>
<span class="sd">         * voltage is both applied and measured (VV-mode),</span>
<span class="sd">         * current is applied and voltage is measured (IV-mode) or</span>
<span class="sd">         * voltage is applied and current is measured (VI-mode)</span>
<span class="sd">        and channels &lt;channels&gt; that are used during sweeps.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mode: int</span>
<span class="sd">            Sweep mode denoting bias and sense modes. Possible values are 0 (VV-mode), 1 (IV-mode) or 2 (VI-mode). Default is 1</span>
<span class="sd">        channels: int or tuple(int)</span>
<span class="sd">            Number of channel of usage. Must be 1 or 2 for IV-mode and VI-mode or a tuple containing both channels for VV-mode (1st argument as bias channel and 2nd argument as sense channel).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">default_channels</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">1</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,),</span> <span class="mi">2</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)}</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="ow">not</span> <span class="n">mode</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sweep channels to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channels</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span> <span class="o">=</span> <span class="n">channels</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sweep channels to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">default_channels</span><span class="p">[</span><span class="n">mode</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span> <span class="o">=</span> <span class="n">default_channels</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep channels to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channels</span><span class="p">))</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep channels to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">channels</span><span class="p">))</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sweep mode to </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">mode</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_mode</span> <span class="o">=</span> <span class="n">mode</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_defaults_docstring</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep mode to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">mode</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep mode to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">mode</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sweep_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sweep_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sweep_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets an internal variable &lt;mode&gt; to decide weather</span>
<span class="sd">         * voltage is both applied and measured (VV-mode),</span>
<span class="sd">         * current is applied and voltage is measured (IV-mode) or</span>
<span class="sd">         * voltage is applied and current is measured (VI-mode).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        mode: int</span>
<span class="sd">            Sweep mode denoting bias and sense modes. Meanings are 0 (VV-mode), 1 (IV-mode) or 2 (VI-mode).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_mode</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sweep_channels">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sweep_channels">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sweep_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets channels &lt;channels&gt; that are used during sweeps. In the IV and VI sweep mode one channel requires for biasing and sensing, whereas two channels are returned in the VV sweep mode (1st as bias and 2nd as sense channel).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        channels: int or tuple(int)</span>
<span class="sd">            Number of channel of usage. Meanings are 1 or 2 for IV-mode and VI-mode or a tuple containing both channels for VV-mode (1st argument as bias channel and 2nd argument as sense channel).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_sweep_bias">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_sweep_bias">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sweep_bias</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls get_bias_mode of channel &lt;channel&gt;. This method is needed for qkit.measure.transport.transport.py in case of no virtual tunnel electronic.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        mode: int</span>
<span class="sd">            Bias mode. Meanings are 0 (current) and 1 (voltage).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_set_sweep_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets sweep start value of channel &lt;channel&gt; to &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val: float</span>
<span class="sd">            Start value of sweep.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:&lt;STARt|STOP&gt; data</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sweep start</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:star </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="p">)],</span> <span class="n">val</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep start</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep start</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_sweep_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets sweep start value of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: float</span>
<span class="sd">            Start value of sweep.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:&lt;STARt|STOP&gt;? [data]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sweep start</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:star&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="p">)])))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sweep start</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sweep start</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_sweep_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets sweep stop value of channel &lt;channel&gt; to &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val: float</span>
<span class="sd">            Stop value of sweep.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:&lt;STARt|STOP&gt; data</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sweep stop</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:stop </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="p">)],</span> <span class="n">val</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep stop</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep stop</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_sweep_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets sweep stop value of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: float</span>
<span class="sd">            Stop value of sweep.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:&lt;STARt|STOP&gt;? [data]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sweep stop</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:stop&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="p">)])))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sweep stop</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sweep stop</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_sweep_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets sweep step value of channel &lt;channel&gt; to &lt;val&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val: float</span>
<span class="sd">            Step value of sweep.</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:STEP step</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sweep step</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:step </span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="p">)],</span> <span class="n">val</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep step</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep step</span><span class="si">{:s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">val</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_sweep_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets sweep step value of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val:</span>
<span class="sd">            Step value of sweep.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:STEP? [step]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sweep step</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:step&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="p">)])))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sweep step</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sweep step</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_sweep_nop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets sweeps number of points (nop) of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val:</span>
<span class="sd">            Number of points of sweep.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:POINts? [points])</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get sweep nop</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:poin&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span>
                                                              <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="p">)])))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sweep nop</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get sweep nop</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span>

<div class="viewcode-block" id="Keysight_B2900.set_sweep_parameters">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_sweep_parameters">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_sweep_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sweep</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets sweep parameters &lt;sweep&gt; and prepares instrument for the set sweep mode.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        sweep: array_likes of floats</span>
<span class="sd">            Sweep range containing start, stop and step size (e.g. sweep object using qkit.measure.transport.transport.sweep class)</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:&lt;CURRent|VOLTage&gt;:MODE mode</span>
        <span class="c1"># Corresponding Command: [:SOUR[c]]:SWE:RANG mode</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:SWEep:SPACing LOGarithmic|LINear (default)</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:SWEep:STAir SINGle (default)|DOUBle</span>
        <span class="c1"># Corresponding Command: [:SOURce[c]]:SWEep:DIRection DOWN|UP (default)</span>
        <span class="c1"># Corresponding Command: :TRIGger[c]&lt;:ACQuire|:TRANsient|[:ALL]&gt;:SOURce[:SIGNal] source</span>
        <span class="c1"># Corresponding Command: :TRIGger[c]&lt;:ACQuire|:TRANsient|[:ALL]&gt;:SOURce[:SIGNal] source</span>
        <span class="c1"># Corresponding Command: :TRIGger&lt;:ACQuire|:TRANsient|[:ALL]&gt;:COUNt</span>
        <span class="c1"># Corresponding Command: :DISPlay:VIEW mode</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_mode</span><span class="p">:</span>  <span class="c1"># 0 (VV-mode)</span>
            <span class="n">channel_bias</span><span class="p">,</span> <span class="n">channel_sense</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># bias channel</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:mode swe&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_bias</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel_bias</span><span class="p">)]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:swe:rang best&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_bias</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:swe:spac lin&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_bias</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:swe:sta sing&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_bias</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:swe:dir up&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_bias</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_sweep_start</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">sweep</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_sweep_stop</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">sweep</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_sweep_step</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">sweep</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">sweep</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">sweep</span><span class="p">[</span><span class="mi">0</span><span class="p">]))),</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_value</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_sweep_start</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">),</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig</span><span class="si">{:d}</span><span class="s1">:acq:sour aint&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel_bias</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig</span><span class="si">{:d}</span><span class="s1">:tran:sour aint&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel_bias</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig</span><span class="si">{:d}</span><span class="s1">:all:count </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel_bias</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sweep_nop</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">)))</span>
                <span class="c1"># sense channel</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:mode swe&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_sense</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel_sense</span><span class="p">)]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:swe:rang best&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_sense</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:swe:spac lin&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_sense</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:swe:sta sing&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_sense</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:swe:dir up&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_sense</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_sweep_start</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel_sense</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_sweep_stop</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel_sense</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;sour</span><span class="si">{:d}</span><span class="s1">:curr:poin </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel_sense</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sweep_nop</span><span class="p">()))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig</span><span class="si">{:d}</span><span class="s1">:acq:sour aint&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel_sense</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig</span><span class="si">{:d}</span><span class="s1">:tran:sour aint&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel_sense</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig</span><span class="si">{:d}</span><span class="s1">:all:count </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel_sense</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sweep_nop</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel_sense</span><span class="p">)))</span>
                <span class="c1"># general</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_sync</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_display</span><span class="p">(</span><span class="s1">&#39;dual&#39;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep parameters of channels </span><span class="si">{!s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">,</span> <span class="n">sweep</span><span class="p">))</span>
                <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep parameters of channels </span><span class="si">{!s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">,</span> <span class="n">sweep</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_mode</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>  <span class="c1"># 1 (IV-mode) | 2 (VI-mode)</span>
            <span class="n">channel_bias</span><span class="p">,</span> <span class="n">channel_sense</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span> <span class="o">*</span> <span class="mi">2</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set sweep parameters of channel </span><span class="si">{!s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">,</span> <span class="n">sweep</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:</span><span class="si">{:s}</span><span class="s1">:mode swe&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_bias</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel_bias</span><span class="p">)]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:swe:rang best&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_bias</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:swe:spac lin&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_bias</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:swe:sta sing&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_bias</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sour</span><span class="si">{:s}</span><span class="s1">:swe:dir up&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cmd_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel_bias</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_sweep_start</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">sweep</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_sweep_stop</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">sweep</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_sweep_step</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">sweep</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">sweep</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">sweep</span><span class="p">[</span><span class="mi">0</span><span class="p">]))),</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_bias_value</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_sweep_start</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">),</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig:acq:sour aint&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig:tran:sour aint&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:trig:all:count </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_sweep_nop</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_display</span><span class="p">(</span><span class="s1">&#39;grap&#39;</span><span class="p">)</span>
                <span class="c1">### TODO: auto scale display</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep parameters of channel </span><span class="si">{!s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">,</span> <span class="n">sweep</span><span class="p">))</span>
                <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot set sweep parameters of channel </span><span class="si">{!s}</span><span class="s1"> to </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">,</span> <span class="n">sweep</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_tracedata">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_tracedata">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_tracedata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Starts bias sweep with already set parameters and gets trace data of bias &lt;bias_values&gt; and sense &lt;sense_values&gt; in the set sweep mode.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bias_values: numpy.array(float)</span>
<span class="sd">            Measured bias values.</span>
<span class="sd">        sense_values: numpy.array(float)</span>
<span class="sd">            Measured sense values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :INITiate[:IMMediate]&lt;:ACQuire|:TRANsient|[:ALL]&gt; [chanlist]</span>
        <span class="c1"># Corresponding Command: :FETCh:ARRay:&lt;CURRent|RESistance|SOURce|STATus|TIME|VOLTage&gt;? [chanlist]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_mode</span><span class="p">:</span>  <span class="c1"># 0 (VV-mode)</span>
                <span class="n">channel_bias</span><span class="p">,</span> <span class="n">channel_sense</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Take sweep data of channels </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:init (@1,2)&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_transition_idle</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">)</span>
                <span class="n">bias_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:fetc:arr:volt? (@</span><span class="si">{:d}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel_bias</span><span class="p">))</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+9.910000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;nan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;9.900000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
                <span class="n">sense_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:fetc:arr:volt? (@</span><span class="si">{:d}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel_sense</span><span class="p">))</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+9.910000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;nan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;9.900000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">bias_values</span><span class="p">,</span> <span class="n">sense_values</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_mode</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>  <span class="c1"># 1 (IV-mode) | 2 (VI-mode)</span>
                <span class="n">channel_bias</span><span class="p">,</span> <span class="n">channel_sense</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span> <span class="o">*</span> <span class="mi">2</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Take sweep data of channel </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:init&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_transition_idle</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel_bias</span><span class="p">)</span>
                <span class="n">I_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:fetc:arr:curr?&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+9.910000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;nan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;9.900000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
                <span class="n">V_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:fetc:arr:volt?&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+9.910000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;nan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;9.900000E+37&#39;</span><span class="p">,</span> <span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">(</span><span class="n">I_values</span><span class="p">,</span> <span class="n">V_values</span><span class="p">)[::</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="mf">.5</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sweep_bias</span><span class="p">()))]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot take sweep data of channel </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot take sweep data of channel </span><span class="si">{!s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.take_IV">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.take_IV">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">take_IV</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sweep</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Takes IV curve with sweep parameters &lt;sweep&gt; in set sweep mode.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        sweep: array_likes of floats</span>
<span class="sd">            Sweep range containing start, stop and step size (e.g. sweep object using qkit.measure.transport.transport.sweep class)</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bias_values: numpy.array(float)</span>
<span class="sd">            Measured bias values.</span>
<span class="sd">        sense_values: numpy.array(float)</span>
<span class="sd">            Measured sense values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sweep_parameters</span><span class="p">(</span><span class="n">sweep</span><span class="o">=</span><span class="n">sweep</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tracedata</span><span class="p">()</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_measurement_ccr">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_measurement_ccr">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_measurement_ccr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the entire measurement condition code register (ccr)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ccr: list of booleans</span>
<span class="sd">            Operation measurement code register. Entries are</span>
<span class="sd">                0: Ch1 Limit Summary</span>
<span class="sd">                1: Ch1 Reading Available</span>
<span class="sd">                2: Ch1 Reading Overflow</span>
<span class="sd">                3: Ch1 Buffer Available</span>
<span class="sd">                4: Ch1 Buffer Full</span>
<span class="sd">                5:</span>
<span class="sd">                6: Ch2 Limit Summary</span>
<span class="sd">                7: Ch2 Reading Available</span>
<span class="sd">                8: Ch2 Reading Overflow</span>
<span class="sd">                9: Ch2 Buffer Available</span>
<span class="sd">                10: Ch2 Buffer Full</span>
<span class="sd">                11:</span>
<span class="sd">                12:</span>
<span class="sd">                13:</span>
<span class="sd">                14:</span>
<span class="sd">                15:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :STATus:&lt;MEASurement|OPERation|QUEStionable&gt;:ENABle mask</span>
        <span class="c1"># Corresponding Command: :STATus:&lt;MEASurement|OPERation|QUEStionable&gt;:CONDition?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get measurement ccr&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:stat:meas:enab 1&#39;</span><span class="p">)</span>
            <span class="n">ccr</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:stat:meas:cond&#39;</span><span class="p">))</span>
            <span class="n">ans</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span>
                <span class="n">ans</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">bool</span><span class="p">((</span><span class="n">ccr</span> <span class="o">&gt;&gt;</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">ans</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get measurement ccr&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get measurement ccr</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.print_measurement_ccr">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.print_measurement_ccr">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">print_measurement_ccr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints the entire measurement condition code register (ccr) including explanation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ccr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_measurement_ccr</span><span class="p">()</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;</span><span class="se">\n\t</span><span class="si">{:36s}</span><span class="s1">:</span><span class="si">{!r}</span><span class="se">\t</span><span class="s1">(</span><span class="si">{:s}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sb</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ccr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">sb</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sb</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">measurement_ccr</span><span class="p">)</span> <span class="k">if</span> <span class="n">sb</span> <span class="o">!=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Measurement ccr :</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_operation_ccr">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_operation_ccr">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_operation_ccr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the entire operation condition code register (ccr)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ccr: list of booleans</span>
<span class="sd">            Operation condition code register. Entries are</span>
<span class="sd">                0: Calibration/Self-Test Running</span>
<span class="sd">                1: Ch1 Transition Idle</span>
<span class="sd">                2: Ch1 Waiting for Transition Trigger</span>
<span class="sd">                3: Program Running</span>
<span class="sd">                4: Ch1 Waiting for Transition Arm</span>
<span class="sd">                5: Ch1 Acquire Idle</span>
<span class="sd">                6: Ch1 Waiting for Acquire Trigger</span>
<span class="sd">                7: Ch1 Waiting for Acquire Arm</span>
<span class="sd">                8: Ch2 Transition Idle</span>
<span class="sd">                9: Ch2 Waiting for Transition Trigger</span>
<span class="sd">                10: Ch2 Waiting for Transition Arm</span>
<span class="sd">                11: Ch2 Acquire Idle</span>
<span class="sd">                12: Ch2 Waiting for Acquire Trigger</span>
<span class="sd">                13: Ch2 Waiting for Acquire Arm</span>
<span class="sd">                14: Instrument Locked</span>
<span class="sd">                15: Program Running</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :STATus:&lt;MEASurement|OPERation|QUEStionable&gt;:ENABle mask</span>
        <span class="c1"># Corresponding Command: :STATus:&lt;MEASurement|OPERation|QUEStionable&gt;:CONDition?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get operation ccr&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:stat:oper:enab 1&#39;</span><span class="p">)</span>
            <span class="n">ccr</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:stat:oper:cond&#39;</span><span class="p">))</span>
            <span class="n">ans</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span>
                <span class="n">ans</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">bool</span><span class="p">((</span><span class="n">ccr</span> <span class="o">&gt;&gt;</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">ans</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get operation ccr&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get operation ccr</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.print_operation_ccr">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.print_operation_ccr">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">print_operation_ccr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints the entire operation condition code register (ccr) including explanation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ccr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_operation_ccr</span><span class="p">()</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;</span><span class="se">\n\t</span><span class="si">{:36s}</span><span class="s1">:</span><span class="si">{!r}</span><span class="se">\t</span><span class="s1">(</span><span class="si">{:s}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sb</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ccr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">sb</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sb</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operation_ccr</span><span class="p">)</span> <span class="k">if</span> <span class="n">sb</span> <span class="o">!=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Operation ccr :</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_questionable_ccr">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_questionable_ccr">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_questionable_ccr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the entire questionable condition code register (ccr)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ccr: list of booleans</span>
<span class="sd">            Questionable condition code register. Entries are</span>
<span class="sd">                0: Voltage Summary</span>
<span class="sd">                1: Current Summary</span>
<span class="sd">                2: Ch1 Output Protection</span>
<span class="sd">                3: Ch2 Output Protection</span>
<span class="sd">                4: Temp. Summary</span>
<span class="sd">                5:</span>
<span class="sd">                6:</span>
<span class="sd">                7:</span>
<span class="sd">                8: Calibration Summary</span>
<span class="sd">                9: Self-Test Summary</span>
<span class="sd">                10: Interlock</span>
<span class="sd">                11: Ch1 Transient Event Lost</span>
<span class="sd">                12: Ch2 Transient Event Lost</span>
<span class="sd">                13: Ch1 Acquire Event Lost</span>
<span class="sd">                14: Ch2 Acquire Event Lost</span>
<span class="sd">                15:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :STATus:&lt;MEASurement|OPERation|QUEStionable&gt;:ENABle mask</span>
        <span class="c1"># Corresponding Command: :STATus:&lt;MEASurement|OPERation|QUEStionable&gt;:CONDition?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get questionable ccr&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:stat:ques:enab 1&#39;</span><span class="p">)</span>
            <span class="n">ccr</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ask</span><span class="p">(</span><span class="s1">&#39;:stat:ques:cond&#39;</span><span class="p">))</span>
            <span class="n">ans</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span>
                <span class="n">ans</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">bool</span><span class="p">((</span><span class="n">ccr</span> <span class="o">&gt;&gt;</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">ans</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get questionable ccr&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get questionable ccr</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.print_questionable_ccr">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.print_questionable_ccr">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">print_questionable_ccr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints the entire questionable condition code register (ccr) including explanation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ccr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_questionable_ccr</span><span class="p">()</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;</span><span class="se">\n\t</span><span class="si">{:36s}</span><span class="s1">:</span><span class="si">{!r}</span><span class="se">\t</span><span class="s1">(</span><span class="si">{:s}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sb</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ccr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">sb</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sb</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">questionable_ccr</span><span class="p">)</span> <span class="k">if</span> <span class="n">sb</span> <span class="o">!=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Questionable ccr :</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_transition_idle">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_transition_idle">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_transition_idle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets event of operation condition code register (ccr) entry &quot;Transition idle&quot; &lt;val&gt; of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val: bool</span>
<span class="sd">            &quot;Transition idle&quot; entry of operation condition code register.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :STATus:&lt;MEASurement|OPERation|QUEStionable&gt;:ENABle mask</span>
        <span class="c1"># Corresponding Command: :STATus:&lt;MEASurement|OPERation|QUEStionable&gt;:CONDition?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span><span class="si">{!s}</span><span class="s1">: Get operation ccr condition &quot;Transition idle&quot;</span><span class="si">{:s}</span><span class="s1">&#39;&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:stat:oper:enab 1&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">bool</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;:stat:oper:cond?&#39;</span><span class="p">))</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">*</span> <span class="p">(</span><span class="n">channel</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get operation ccr condition &quot;Transition idle&quot;</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">]))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get operation ccr condition &quot;Transition idle&quot;</span><span class="si">{:s}</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_chans</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">][</span><span class="n">channel</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_wait_for_transition_idle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Waits until the event of operation condition code register (ccr) entry &quot;Transition idle&quot; of channel &lt;channel&gt; occurs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels. Default is 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_transition_idle</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)):</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">100e-3</span><span class="p">)</span>
        <span class="k">return</span>

<div class="viewcode-block" id="Keysight_B2900.set_display">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_display">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the display mode to &lt;mode&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mode: str</span>
<span class="sd">            Bias trigger mode. Must be &#39;SINGle1&#39; (channel 1), &#39;SINGle2&#39; (channel 2), &#39;DUAL&#39; (channel 1 &amp; 2), &#39;GRAPh&#39; (xy-graph of sweeps).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :DISPlay:VIEW</span>
        <span class="k">if</span> <span class="n">mode</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;sing1&#39;</span><span class="p">,</span> <span class="s1">&#39;single1&#39;</span><span class="p">,</span> <span class="s1">&#39;sing2&#39;</span><span class="p">,</span> <span class="s1">&#39;single2&#39;</span><span class="p">,</span> <span class="s1">&#39;dual&#39;</span><span class="p">,</span> <span class="s1">&#39;grap&#39;</span><span class="p">,</span> <span class="s1">&#39;graph&#39;</span><span class="p">):</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Set display to </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">mode</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:disp:view </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:s}</span><span class="s1">: Cannot set display to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">mode</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:s}</span><span class="s1">: Cannot set display to </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">mode</span><span class="p">))</span></div>


<div class="viewcode-block" id="Keysight_B2900.set_defaults">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.set_defaults">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sweep_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets default settings. Actual settings are:</span>
<span class="sd">        default parameters</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        sweep_mode: int</span>
<span class="sd">            Sweep mode denoting bias and sense modes. Possible values are 0 (VV-mode), 1 (IV-mode) or 2 (VI-mode). Default is 1</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SYSTem:BEEPer:STATe</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="c1"># beeper off</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:syst:beep:stat 0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;:sens:func:on:all&#39;</span><span class="p">)</span>  <span class="c1"># enable all sense functions (voltage, current, resistance)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;:sens:func:off &quot;res&quot;&#39;&#39;&#39;</span><span class="p">)</span>  <span class="c1"># disable resistance</span>
        <span class="c1"># distinguish different sweep modes</span>
        <span class="k">if</span> <span class="n">sweep_mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_sweep_mode</span><span class="p">(</span><span class="n">sweep_mode</span><span class="p">)</span>
        <span class="c1"># set values</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">func</span><span class="p">,</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sweep_mode</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">func</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span>
                <span class="c1"># eval(&#39;map(lambda channel, self=self: self.set_{:s}({!s}, channel=channel), [{:d}])&#39;.format(key_parameter, val_parameter, channel))</span>
                <span class="c1"># eval(&#39;self.set_{:s}({!s}, channel={:d})&#39;.format(key_parameter, val_parameter, channel))</span>
        <span class="k">return</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_set_defaults_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets docstring of &quot;set_defaults&quot; method with actual default settings.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">pass</span>
        <span class="n">new</span> <span class="o">=</span> <span class="s1">&#39;sweep mode: </span><span class="si">{:d}</span><span class="s1">:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sweep_mode</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">    channel: </span><span class="si">{:d}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="se">\t\t</span><span class="si">{:s}</span><span class="s1">: </span><span class="si">{!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;set_&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="n">param</span><span class="p">)</span> <span class="k">for</span> <span class="n">func</span><span class="p">,</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sweep_mode</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_defaults</span><span class="o">.</span><span class="vm">__func__</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_defaults</span><span class="o">.</span><span class="vm">__func__</span><span class="o">.</span><span class="vm">__doc__</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_str</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_str</span> <span class="o">=</span> <span class="n">new</span>
        <span class="k">return</span>

<div class="viewcode-block" id="Keysight_B2900.get_all">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_all">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints all settings of channel &lt;channel&gt;.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        channel: int</span>
<span class="sd">            Number of channel of interest. Must be 1 for SMUs with only one channel and 1 or 2 for SMUs with two channels or None for both channels. Default is None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:s}</span><span class="s1">: Get all&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">chan</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channels</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">channel</span> <span class="o">==</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="n">channel</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;channel: </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chan</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">measurement mode   = </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_measurement_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_measurement_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">bias mode          = </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">sense mode         = </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_IV_modes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_sense_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">bias range         = </span><span class="si">{:1.0e}{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_range</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_units</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">sense range        = </span><span class="si">{:1.0e}{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_sense_range</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_units</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_sense_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">bias delay         = </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_delay</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">sense delay        = </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_sense_delay</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">sense nplc         = </span><span class="si">{:f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_sense_nplc</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">status             = </span><span class="si">{!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">bias value         = </span><span class="si">{:g}{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_value</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_units</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)]))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">sense value        = </span><span class="si">{:g}{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_sense_value</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_units</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_sense_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">sweep start        = </span><span class="si">{:g}{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_sweep_start</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_units</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">sweep stop         = </span><span class="si">{:g}{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_sweep_stop</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_units</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">sweep step         = </span><span class="si">{:g}{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_sweep_step</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IV_units</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_bias_mode</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="p">)]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">sweep nop          = </span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_sweep_nop</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sweep_channels</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;plc                = </span><span class="si">{:f}</span><span class="s1">Hz&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_plc</span><span class="p">()))</span>
        <span class="k">for</span> <span class="n">err</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_error</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;error              = </span><span class="si">{:d}</span><span class="se">\t</span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">err</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_measurement_ccr</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_operation_ccr</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_questionable_ccr</span><span class="p">()</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.reset">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.reset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets the instrument or a single channel to default conditions.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: *RST</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Reset instrument to factory settings&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;*RST&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot reset instrument to factory settings&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot reset instrument to factory settings</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_error">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_error">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets errors of instrument and removes them from the error queue.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        err: array of str</span>
<span class="sd">            Entries from the error queue</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: :SYSTem:ERRor:ALL?</span>
        <span class="c1"># :SYSTem:ERRor:CODE:ALL?</span>
        <span class="c1"># :SYSTem:ERRor:CODE[:NEXT]?</span>
        <span class="c1"># :SYSTem:ERRor:COUNt?</span>
        <span class="c1"># :SYSTem:ERRor[:NEXT]?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Get errors of instrument&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="n">err</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;:syst:err:all?&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
            <span class="n">err</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">])),</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">err</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">err</span><span class="p">:</span>
                <span class="n">err</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;no error&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
            <span class="k">return</span> <span class="n">err</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get errors of instrument&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot get errors of instrument</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_raise_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets errors of instrument and as the case may be raises a python error.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_error</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">errors</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># no error</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; raises the following errors:&#39;</span>
            <span class="k">for</span> <span class="n">err</span> <span class="ow">in</span> <span class="n">errors</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="si">{:s}</span><span class="s1"> (</span><span class="si">{:s}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">err_msg</span><span class="p">[</span><span class="n">err</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">err</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<div class="viewcode-block" id="Keysight_B2900.clear_error">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.clear_error">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">clear_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears error of instrument.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Corresponding Command: *CLS</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Clears error of instrument&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="s1">&#39;*CLS&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot clears error of instrument&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot clears error of instrument</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.close">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.close">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Closes the VISA-instrument to disconnect the instrument.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Close VISA-instrument&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot close VISA-instrument&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)(</span><span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">: Cannot close VISA-instrument</span><span class="se">\n</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Keysight_B2900.get_parameters">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get_parameters">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets a parameter list &lt;parlist&gt; of measurement specific setting parameters.</span>
<span class="sd">        Needed for .set-file in &#39;write_additional_files&#39;, if qt parameters are not used.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        parlist: dict</span>
<span class="sd">            Parameter names as keys, corresponding channels of interest as values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parlist</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;measurement_mode&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)},</span>
                   <span class="s1">&#39;bias_mode&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)},</span>
                   <span class="s1">&#39;sense_mode&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)},</span>
                   <span class="s1">&#39;bias_range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)},</span>
                   <span class="s1">&#39;sense_range&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)},</span>
                   <span class="s1">&#39;bias_trigger&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)},</span>
                   <span class="s1">&#39;sense_trigger&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)},</span>
                   <span class="s1">&#39;bias_delay&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)},</span>
                   <span class="s1">&#39;sense_delay&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)},</span>
                   <span class="s1">&#39;bias_value&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)},</span>
                   <span class="s1">&#39;plc&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">]},</span>
                   <span class="s1">&#39;sense_nplc&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)},</span>
                   <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)},</span>
                   <span class="p">}</span>
        <span class="k">return</span> <span class="n">parlist</span></div>


<div class="viewcode-block" id="Keysight_B2900.get">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Keysight_B2900.Keysight_B2900.get">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the current parameter &lt;param&gt; by evaluation &#39;get_&#39;+&lt;param&gt; and corresponding channel if needed</span>
<span class="sd">        In combination with &lt;self.get_parameters&gt; above.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        param: str</span>
<span class="sd">            Parameter of interest.</span>
<span class="sd">        channels: array_likes</span>
<span class="sd">            Number of channels of interest. Must be in {1, 2} for channel specific parameters or None for channel independent (global) parameters.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        parlist: dict</span>
<span class="sd">            Parameter names as keys, values of corresponding channels as values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">channels</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;channels&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;channels&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">channels</span> <span class="o">==</span> <span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;get_</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">param</span><span class="p">))()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">tuple</span><span class="p">([</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;get_</span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">param</span><span class="p">))(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">)</span> <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">])</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Wridhdhisom / Quantum Circuits Group.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>